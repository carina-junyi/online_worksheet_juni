<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æŒ‡æ•¸çš„æ„ç¾©äº’å‹•è¬›ç¾©</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700;900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: #f8fafc;
        }
        .math-serif {
            font-family: 'Times New Roman', serif;
        }
        .step-hidden {
            display: none;
        }
        .animate-fade-in {
            animation: fadeIn 0.3s ease-in;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="p-4 md:p-8 text-slate-900">

    <div class="max-w-4xl mx-auto">
        <!-- Header -->
        <header class="text-center mb-8">
            <h1 class="text-3xl md:text-4xl font-black text-slate-800 mb-2 flex items-center justify-center gap-3">
                <i data-lucide="zap" class="text-indigo-600 fill-indigo-600"></i> æŒ‡æ•¸çš„æ„ç¾©
            </h1>
            <p class="text-slate-600 font-medium tracking-wide">N-7-6 äº’å‹•å¼å­¸ç¿’è¬›ç¾©</p>
        </header>

        <!-- Learning Objectives -->
        <section class="bg-white rounded-xl shadow-sm p-6 mb-6 border-l-4 border-blue-500">
            <h2 class="text-xl font-bold text-blue-700 mb-3 flex items-center gap-2">
                <i data-lucide="target" class="w-5 h-5"></i> ğŸ¯ å­¸ç¿’ç›®æ¨™
            </h2>
            <ul class="list-disc list-inside text-slate-700 space-y-2 text-sm md:text-base font-medium">
                <li>ç†è§£ã€ŒæŒ‡æ•¸ã€æ˜¯è¡¨ç¤ºé‡è¤‡ä¹˜æ³•çš„æ–¹å¼ã€‚</li>
                <li>èªªå‡ºæŒ‡æ•¸è¡¨ç¤ºä¸­ã€Œåº•æ•¸ã€èˆ‡ã€ŒæŒ‡æ•¸ã€çš„æ„ç¾©ã€‚</li>
                <li>æ­£ç¢ºå°‡é‡è¤‡ä¹˜æ³•æ”¹å¯«æˆæŒ‡æ•¸å½¢å¼ï¼Œæˆ–åå‘å±•é–‹ã€‚</li>
                <li>ç†è§£è¦å‰‡ï¼šç•¶ <span class="italic font-serif text-indigo-700 font-bold">a</span> â‰  0 æ™‚ï¼Œ<span class="italic font-serif text-indigo-700 font-bold">a</span><sup>0</sup> = 1ã€‚</li>
                <li>æŒæ¡åŒåº•æ•¸ã€ä¸åŒæŒ‡æ•¸çš„å¤§å°æ¯”è¼ƒç›´è¦ºã€‚</li>
            </ul>
        </section>

        <!-- Concept Cards -->
        <div class="grid md:grid-cols-3 gap-4 mb-6">
            <div class="bg-green-50 p-5 rounded-lg border border-green-200">
                <h3 class="font-bold text-green-700 text-lg mb-2">1ï¸âƒ£ åº•æ•¸ (Base)</h3>
                <p class="text-sm text-green-800 leading-relaxed">ç®—å¼ä¸­è¢«ã€Œé‡è¤‡ç›¸ä¹˜ã€çš„é‚£ä¸€å€‹æ•¸å­—ã€‚</p>
                <p class="mt-2 font-mono text-xs text-green-600 italic">ä¾‹å¦‚ï¼š2 Ã— 2 Ã— 2 ä¸­çš„ ã€Œ2ã€</p>
            </div>
            <div class="bg-slate-100 p-5 rounded-lg border border-slate-200">
                <h3 class="font-bold text-slate-700 text-lg mb-2">2ï¸âƒ£ æŒ‡æ•¸ (Exponent)</h3>
                <p class="text-sm text-slate-800 leading-relaxed">ä»£è¡¨é‚£å€‹æ•¸å­—ã€Œä¹˜äº†å¹¾æ¬¡ã€ï¼Œå¯«åœ¨å³ä¸Šæ–¹ã€‚</p>
                <p class="mt-2 font-mono text-xs text-slate-500 italic">ä¾‹å¦‚ï¼š2<sup>3</sup> ä¸­çš„ ã€Œ3ã€</p>
            </div>
            <div class="bg-red-50 p-5 rounded-lg border border-red-200">
                <h3 class="font-bold text-red-700 text-lg mb-2">3ï¸âƒ£ é›¶æ¬¡æ–¹è¦å‰‡</h3>
                <p class="text-sm text-red-800 font-bold underline leading-relaxed">
                    ç•¶åº•æ•¸ä¸ç‚º 0 æ™‚ï¼Œ<span class="italic font-serif font-bold">a</span><sup>0</sup> = 1ï¼
                </p>
                <p class="mt-2 text-xs text-red-600 italic">é€™æ˜¯é€éé™¤æ³•è¦å¾‹è§€å¯Ÿå‡ºä¾†çš„çµæœã€‚</p>
            </div>
        </div>

        <!-- Worked Examples -->
        <section class="bg-white rounded-xl shadow-sm p-6 mb-6 border-l-4 border-indigo-400">
            <h2 class="text-xl font-bold text-indigo-700 mb-4 flex items-center gap-2">
                <i data-lucide="book-open" class="w-5 h-5"></i> ğŸ“– ä¾‹é¡Œç¤ºç¯„
            </h2>
            <div class="space-y-6">
                <div class="bg-indigo-50/50 p-4 rounded-lg border border-indigo-100">
                    <p class="font-bold text-slate-800 mb-2">ğŸ“Œ ä¾‹é¡Œ 1ï¼šæŒ‡æ•¸çš„æ„ç¾©</p>
                    <p class="text-slate-600 mb-3 text-sm">å°‡ä¸‹åˆ—ç®—å¼æ”¹å¯«æˆæŒ‡æ•¸å½¢å¼ï¼š 4 Ã— 4 Ã— 4 Ã— 4</p>
                    <div class="bg-white p-3 rounded border border-indigo-100 text-sm">
                        <p class="text-indigo-800 font-medium">âœï¸ è§£é¡Œèªªæ˜ï¼š</p>
                        <p class="text-slate-600">å…±æœ‰ 4 å€‹ 4 ç›¸ä¹˜ï¼Œåº•æ•¸ç‚º 4ï¼ŒæŒ‡æ•¸ç‚º 4ã€‚</p>
                        <p class="mt-1 font-bold text-lg text-indigo-600">ç­”æ¡ˆï¼š4<sup>4</sup></p>
                    </div>
                </div>

                <div class="bg-indigo-50/50 p-4 rounded-lg border border-indigo-100">
                    <p class="font-bold text-slate-800 mb-2">ğŸ“Œ ä¾‹é¡Œ 2ï¼šæ¯”è¼ƒå¤§å°</p>
                    <p class="text-slate-600 mb-3 text-sm">æ¯”è¼ƒ 3<sup>2</sup> èˆ‡ 3<sup>4</sup> çš„å¤§å°ã€‚</p>
                    <div class="bg-white p-3 rounded border border-indigo-100 text-sm">
                        <p class="text-indigo-800 font-medium mb-1">âœï¸ è§£é¡Œå¼•å°ï¼š</p>
                        <div class="flex flex-col gap-1 text-slate-600 font-medium">
                            <p>1. åº•æ•¸ä¸€æ¨£ï¼Œéƒ½æ˜¯ <span class="text-indigo-600 font-bold">3</span>ã€‚</p>
                            <p>2. æ¯”è¼ƒæŒ‡æ•¸ï¼šæŒ‡æ•¸ <span class="text-indigo-600 font-bold">4</span> æ¯” <span class="text-indigo-600 font-bold">2</span> å¤§ã€‚</p>
                        </div>
                        <p class="mt-2 font-bold text-lg text-indigo-600">ç­”æ¡ˆï¼š3<sup>4</sup> > 3<sup>2</sup></p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Exponent Builder -->
        <section class="bg-white rounded-xl shadow-md p-6 mb-8 border border-slate-200">
            <div class="flex justify-between items-center mb-4">
                <h2 class="text-2xl font-bold text-slate-800 flex items-center gap-2">
                    <i data-lucide="zap" class="text-indigo-600 w-6 h-6 fill-indigo-600"></i> äº’å‹•æŒ‡æ•¸æ§‹é€ å™¨
                </h2>
                <button onclick="resetBuilder()" class="px-4 py-2 bg-slate-200 hover:bg-slate-300 rounded-md text-sm font-medium transition-colors">é‡ç½®æ•¸å€¼</button>
            </div>
            <p class="text-slate-600 mb-6 text-sm">èª¿æ•´åº•æ•¸èˆ‡æŒ‡æ•¸ï¼Œè§€å¯Ÿå±•é–‹èˆ‡è¨ˆç®—çµæœï¼š</p>
            
            <div class="flex flex-col items-center justify-center p-8 bg-slate-50 rounded-xl mb-6">
                <div class="flex items-end gap-1 mb-6">
                    <span id="display-base" class="text-7xl font-bold text-slate-800 leading-none">2</span>
                    <span id="display-power" class="text-3xl font-bold text-indigo-600 leading-none pb-8">3</span>
                </div>
                
                <div class="bg-white px-8 py-5 rounded-xl border border-slate-200 shadow-sm w-full max-w-lg text-center">
                    <div class="mb-2 text-slate-400 text-xs font-bold uppercase tracking-widest">å±•é–‹å¼</div>
                    <div id="display-expansion" class="text-xl font-serif tracking-widest text-slate-600 italic mb-4">
                        = 2 Ã— 2 Ã— 2
                    </div>
                    
                    <div class="pt-4 border-t border-slate-100 flex flex-col items-center">
                        <div class="mb-1 text-slate-400 text-xs font-bold uppercase tracking-widest">è¨ˆç®—çµæœ</div>
                        <div id="display-result" class="text-4xl font-black text-indigo-600 font-sans tracking-normal">
                            = 8
                        </div>
                    </div>
                </div>
            </div>

            <div class="bg-blue-50 p-4 rounded-lg flex flex-wrap gap-4 items-center justify-center">
                <div class="flex items-center gap-2">
                    <span class="text-sm font-bold text-blue-800">åº•æ•¸ï¼š</span>
                    <div class="flex gap-1" id="base-buttons">
                        <!-- Buttons injected by JS -->
                    </div>
                </div>
                <div class="flex items-center gap-2 border-l border-blue-200 pl-4">
                    <span class="text-sm font-bold text-blue-800">æŒ‡æ•¸ï¼š</span>
                    <div class="flex gap-1" id="power-buttons">
                        <!-- Buttons injected by JS -->
                    </div>
                </div>
            </div>
        </section>

        <!-- Guided Quiz -->
        <section class="bg-amber-50 rounded-xl shadow-sm p-6 mb-8 border border-amber-200">
            <h2 class="text-xl font-bold text-amber-800 mb-4 flex items-center gap-2">
                <i data-lucide="help-circle" class="w-5 h-5"></i> ğŸ” å¼•å°ç·´ç¿’ï¼šå°‡ã€Œ2 Ã— 2 Ã— 2 Ã— 2 Ã— 2ã€æ”¹å¯«
            </h2>
            <div class="space-y-4" id="quiz-steps">
                <!-- Step 1 -->
                <div id="step-1" class="animate-fade-in">
                    <p class="text-slate-800 mb-2 font-medium">1ï¸âƒ£ é‡è¤‡å‡ºç¾çš„ã€Œåº•æ•¸ã€æ˜¯å¤šå°‘ï¼Ÿ</p>
                    <div class="flex gap-2">
                        <button onclick="handleStep(1, true, 'æ­£ç¢ºï¼åº•æ•¸å°±æ˜¯ 2ã€‚')" class="px-4 py-2 bg-white border border-amber-300 rounded hover:bg-amber-100 font-bold">2</button>
                        <button onclick="handleStep(1, false, 'ä¸å°å–”ï¼Œ5 æ˜¯ç›¸ä¹˜çš„æ¬¡æ•¸ã€‚')" class="px-4 py-2 bg-white border border-amber-300 rounded hover:bg-amber-100 font-bold">5</button>
                    </div>
                </div>
                <!-- Step 2 -->
                <div id="step-2" class="step-hidden animate-fade-in">
                    <p class="text-slate-800 mb-2 font-medium">2ï¸âƒ£ æ•¸å­— 2 ç¸½å…±ä¹˜äº†å¹¾æ¬¡ï¼Ÿï¼ˆæŒ‡æ•¸ï¼‰</p>
                    <div class="flex gap-2">
                        <button onclick="handleStep(2, false, 'å†æ•¸ä¸€æ¬¡ï¼Ÿ')" class="px-4 py-2 bg-white border border-amber-300 rounded hover:bg-amber-100 font-bold">4 æ¬¡</button>
                        <button onclick="handleStep(2, true, 'æ²’éŒ¯ï¼ä¸€å…±ä¹˜äº† 5 æ¬¡ã€‚')" class="px-4 py-2 bg-white border border-amber-300 rounded hover:bg-amber-100 font-bold">5 æ¬¡</button>
                    </div>
                </div>
                <!-- Step 3 -->
                <div id="step-3" class="step-hidden animate-fade-in">
                    <p class="text-slate-800 mb-2 font-medium">3ï¸âƒ£ æœ€å¾Œï¼ŒæŠŠå®ƒå¯«æˆæŒ‡æ•¸å½¢å¼æœƒæ˜¯ï¼Ÿ</p>
                    <div class="flex gap-2">
                        <button onclick="handleStep(3, false, 'é€™æ˜¯ 2 ä¹˜ä»¥ 5ã€‚')" class="px-4 py-2 bg-white border border-amber-300 rounded hover:bg-amber-100 font-bold">2 Ã— 5</button>
                        <button onclick="handleStep(3, true, 'å¤ªæ£’äº†ï¼æŒ‡æ•¸å½¢å¼å°±æ˜¯ 2 çš„ 5 æ¬¡æ–¹ã€‚')" class="px-4 py-2 bg-white border border-amber-300 rounded hover:bg-amber-100 font-bold">2<sup>5</sup></button>
                    </div>
                </div>
                <div id="quiz-feedback" class="p-4 rounded-lg font-bold text-center mt-4 hidden"></div>
            </div>
        </section>

        <!-- Practice Questions -->
        <section class="bg-white rounded-xl shadow-lg p-6 mb-8 border-t-8 border-emerald-500">
            <div class="flex items-center gap-2 mb-6">
                <i data-lucide="trophy" class="w-6 h-6 text-emerald-600"></i>
                <h2 class="text-2xl font-bold text-slate-800">ğŸ¯ è‡ªæˆ‘æŒ‘æˆ°ï¼šäº’å‹•ç·´ç¿’é¡Œ</h2>
            </div>
            
            <div class="grid md:grid-cols-2 gap-6">
                <!-- Q1 -->
                <div class="p-4 bg-slate-50 rounded-xl border border-slate-200">
                    <p class="text-slate-800 font-bold mb-3">Q1. è¨ˆç®— 2<sup>4</sup> çš„çµæœï¼š</p>
                    <div class="flex gap-2">
                        <input type="number" id="ans-q1" class="flex-1 px-3 py-2 border rounded-lg focus:ring-2 focus:ring-emerald-500 outline-none" placeholder="è¼¸å…¥æ•¸å­—">
                        <button onclick="checkAnswer('q1', 16)" class="p-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700"><i data-lucide="send" class="w-5 h-5"></i></button>
                    </div>
                    <p id="feedback-q1" class="mt-2 text-sm font-bold hidden"></p>
                </div>
                <!-- Q2 -->
                <div class="p-4 bg-slate-50 rounded-xl border border-slate-200">
                    <p class="text-slate-800 font-bold mb-3">Q2. è¨ˆç®— 135<sup>0</sup> çš„çµæœï¼š</p>
                    <div class="flex gap-2">
                        <input type="number" id="ans-q2" class="flex-1 px-3 py-2 border rounded-lg focus:ring-2 focus:ring-emerald-500 outline-none" placeholder="è¼¸å…¥æ•¸å­—">
                        <button onclick="checkAnswer('q2', 1)" class="p-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700"><i data-lucide="send" class="w-5 h-5"></i></button>
                    </div>
                    <p id="feedback-q2" class="mt-2 text-sm font-bold hidden"></p>
                </div>
                <!-- Q3 -->
                <div class="p-4 bg-slate-50 rounded-xl border border-slate-200">
                    <p class="text-slate-800 font-bold mb-3">Q3. æ¯”è¼ƒï¼š5<sup>2</sup> __ 5<sup>3</sup> (å¡«å…¥ < æˆ– >)</p>
                    <div class="flex gap-2">
                        <input type="text" id="ans-q3" class="flex-1 px-3 py-2 border rounded-lg focus:ring-2 focus:ring-emerald-500 outline-none" placeholder="è¼¸å…¥ < æˆ– >">
                        <button onclick="checkAnswer('q3', '<')" class="p-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700"><i data-lucide="send" class="w-5 h-5"></i></button>
                    </div>
                    <p id="feedback-q3" class="mt-2 text-sm font-bold hidden"></p>
                </div>
                <!-- Q4 -->
                <div class="p-4 bg-slate-50 rounded-xl border border-slate-200">
                    <p class="text-slate-800 font-bold mb-3">Q4. åœ¨ 7<sup>9</sup> ä¸­ï¼ŒæŒ‡æ•¸æ˜¯å“ªä¸€å€‹æ•¸å­—ï¼Ÿ</p>
                    <div class="flex gap-2">
                        <input type="number" id="ans-q4" class="flex-1 px-3 py-2 border rounded-lg focus:ring-2 focus:ring-emerald-500 outline-none" placeholder="è¼¸å…¥æ•¸å­—">
                        <button onclick="checkAnswer('q4', 9)" class="p-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700"><i data-lucide="send" class="w-5 h-5"></i></button>
                    </div>
                    <p id="feedback-q4" class="mt-2 text-sm font-bold hidden"></p>
                </div>
            </div>
            
            <div class="mt-6 flex justify-center">
                <button onclick="resetPractice()" class="px-6 py-2 bg-slate-200 text-slate-600 rounded-lg font-bold hover:bg-slate-300 transition-colors flex items-center gap-2">
                    <i data-lucide="rotate-ccw" class="w-4 h-4"></i> å…¨éƒ¨æ¸…é™¤é‡æ–°ç·´ç¿’
                </button>
            </div>
        </section>

        <!-- Footer -->
        <footer class="grid md:grid-cols-2 gap-6 mb-8">
            <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-200">
                <h3 class="font-bold text-slate-800 mb-3 border-b pb-2 flex items-center gap-2">
                    <i data-lucide="alert-triangle" class="text-red-500 w-5 h-5"></i> âš ï¸ å¸¸è¦‹è¿·æ€
                </h3>
                <ul class="text-sm space-y-4 text-slate-600 font-medium">
                    <li class="flex items-start gap-2">
                        <span class="text-red-500 font-bold">âŒ a<sup>0</sup> = 0</span>
                        <span>â†’ ä¸å°ï¼Œa<sup>0</sup> = 1 (ç•¶ a â‰  0)ã€‚</span>
                    </li>
                    <li class="flex items-start gap-2">
                        <span class="text-red-500 font-bold">âŒ 2<sup>3</sup> = 2 Ã— 3</span>
                        <span>â†’ æŒ‡æ•¸æ˜¯é€£ä¹˜ï¼Œ2<sup>3</sup> = 2 Ã— 2 Ã— 2 = 8ã€‚</span>
                    </li>
                    <li class="flex items-start gap-2">
                        <span class="text-red-500 font-bold">âŒ æŒ‡æ•¸è¶Šå¤§å°±è¶Šå¤§</span>
                        <span>â†’ é™·é˜±ï¼å¦‚æœåº•æ•¸æ¯” 1 å°ï¼Œä¾‹å¦‚ 0.1ï¼ŒæŒ‡æ•¸è¶Šå¤§å€¼åè€Œè¶Šå°ã€‚</span>
                    </li>
                </ul>
            </div>
            <div class="bg-indigo-900 text-indigo-50 p-6 rounded-xl shadow-sm relative overflow-hidden">
                <h3 class="font-bold mb-3 border-b border-indigo-700 pb-2 flex items-center gap-2">
                    <i data-lucide="message-square" class="w-5 h-5 text-indigo-300"></i> ğŸ¤” åæ€èˆ‡è¨è«–
                </h3>
                <p class="text-sm leading-relaxed italic mb-4">ã€Œç‚ºä»€éº¼æŒ‡æ•¸å¯ä»¥è®“ç®—å¼è®Šç°¡æ½”ï¼Ÿæƒ³åƒä¸€ä¸‹ï¼Œå¦‚æœè¦å¯«å‡º 2 çš„ 100 æ¬¡æ–¹ï¼Œå±•é–‹ä¾†æœƒæœ‰å¤šé•·ï¼Ÿã€</p>
                <div class="bg-white/10 p-3 rounded-lg border border-white/20">
                    <p class="text-xs font-bold text-indigo-200 mb-1">æ€è€ƒé¡Œï¼š</p>
                    <p class="text-sm leading-relaxed">å¦‚æœä¸€å€‹æ•¸å­—çš„åº•æ•¸æ˜¯ 1ï¼Œä¸è«–æŒ‡æ•¸æ˜¯å¤šå°‘ï¼ˆä¾‹å¦‚ 1<sup>500</sup>ï¼‰ï¼Œå®ƒçš„çµæœæœƒæ˜¯å¤šå°‘å‘¢ï¼Ÿ</p>
                </div>
            </div>
        </footer>

        <div class="text-center text-slate-400 text-xs pb-8">
            Â© äº’å‹•æ•¸å­¸è¬›ç¾©ç³»åˆ— | ç¬¦åˆ 108 èª²ç¶±æ•™å­¸æŒ‡å¼•
        </div>
    </div>

    <script>
        // Initialize Lucide Icons
        lucide.createIcons();

        // State for Builder
        let currentBase = 2;
        let currentPower = 3;

        // Configuration
        const baseOptions = [2, 3, 5, 10];
        const powerOptions = [0, 1, 2, 3, 4, 5];

        function initBuilder() {
            const baseContainer = document.getElementById('base-buttons');
            const powerContainer = document.getElementById('power-buttons');

            baseOptions.forEach(n => {
                const btn = document.createElement('button');
                btn.className = `base-btn px-3 py-1 rounded text-sm font-bold transition-all ${currentBase === n ? 'bg-blue-600 text-white' : 'bg-white border border-blue-200 text-blue-600'}`;
                btn.innerText = n;
                btn.onclick = () => setBase(n);
                baseContainer.appendChild(btn);
            });

            powerOptions.forEach(n => {
                const btn = document.createElement('button');
                btn.className = `power-btn px-3 py-1 rounded text-sm font-bold transition-all ${currentPower === n ? 'bg-indigo-600 text-white' : 'bg-white border border-indigo-200 text-indigo-600'}`;
                btn.innerText = n;
                if (n === 0) btn.className = `power-btn px-3 py-1 rounded text-sm font-bold transition-all ${currentPower === n ? 'bg-red-600 text-white' : 'bg-white border border-red-200 text-red-600'}`;
                btn.onclick = () => setPower(n);
                powerContainer.appendChild(btn);
            });

            updateDisplay();
        }

        function setBase(n) {
            currentBase = n;
            updateDisplay();
            updateButtonStyles();
        }

        function setPower(n) {
            currentPower = n;
            updateDisplay();
            updateButtonStyles();
        }

        function updateDisplay() {
            document.getElementById('display-base').innerText = currentBase;
            document.getElementById('display-power').innerText = currentPower;
            
            let expansion = "";
            if (currentPower === 0) {
                expansion = "1";
            } else {
                expansion = Array(currentPower).fill(currentBase).join(' Ã— ');
            }
            document.getElementById('display-expansion').innerText = `= ${expansion}`;
            document.getElementById('display-result').innerText = `= ${Math.pow(currentBase, currentPower).toLocaleString()}`;
        }

        function updateButtonStyles() {
            document.querySelectorAll('.base-btn').forEach(btn => {
                const val = parseInt(btn.innerText);
                btn.className = `base-btn px-3 py-1 rounded text-sm font-bold transition-all ${currentBase === val ? 'bg-blue-600 text-white' : 'bg-white border border-blue-200 text-blue-600'}`;
            });
            document.querySelectorAll('.power-btn').forEach(btn => {
                const val = parseInt(btn.innerText);
                if (val === 0) {
                    btn.className = `power-btn px-3 py-1 rounded text-sm font-bold transition-all ${currentPower === val ? 'bg-red-600 text-white shadow-md' : 'bg-white border border-red-200 text-red-600'}`;
                } else {
                    btn.className = `power-btn px-3 py-1 rounded text-sm font-bold transition-all ${currentPower === val ? 'bg-indigo-600 text-white shadow-md' : 'bg-white border border-indigo-200 text-indigo-600'}`;
                }
            });
        }

        function resetBuilder() {
            currentBase = 2;
            currentPower = 3;
            updateDisplay();
            updateButtonStyles();
        }

        // Quiz Logic
        function handleStep(step, isCorrect, feedbackText) {
            const feedbackDiv = document.getElementById('quiz-feedback');
            feedbackDiv.classList.remove('hidden');
            
            if (isCorrect) {
                feedbackDiv.innerText = `âœ… ${feedbackText}`;
                feedbackDiv.className = "p-4 rounded-lg font-bold text-center mt-4 bg-green-100 text-green-800 animate-fade-in";
                
                if (step < 3) {
                    document.getElementById(`step-${step}`).classList.add('opacity-50', 'pointer-events-none');
                    document.getElementById(`step-${step + 1}`).classList.remove('step-hidden');
                }
            } else {
                feedbackDiv.innerText = `âŒ ${feedbackText}`;
                feedbackDiv.className = "p-4 rounded-lg font-bold text-center mt-4 bg-red-100 text-red-800 animate-fade-in";
            }
        }

        // Practice Logic
        function checkAnswer(id, correct) {
            const input = document.getElementById(`ans-${id}`);
            const feedback = document.getElementById(`feedback-${id}`);
            const val = input.value.trim();
            
            feedback.classList.remove('hidden');
            if (val == correct) {
                feedback.innerText = "ğŸ‰ ç­”å°äº†ï¼å¤ªå„ªç§€äº†ã€‚";
                feedback.className = "mt-2 text-sm font-bold text-emerald-600 animate-fade-in";
            } else {
                let hint = "å†æƒ³ä¸€ä¸‹å–”ï¼";
                if (id === 'q1') hint = "æ˜¯ 4 å€‹ 2 é€£ä¹˜å–”ã€‚";
                if (id === 'q2') hint = "è¨˜å¾—é›¶æ¬¡æ–¹è¦å‰‡å—ï¼Ÿ";
                if (id === 'q3') hint = "åº•æ•¸å¤§æ–¼ 1 æ™‚ï¼Œä¹˜è¶Šå¤šæ¬¡å€¼è¶Šå¤§ã€‚";
                feedback.innerText = `âŒ ${hint}`;
                feedback.className = "mt-2 text-sm font-bold text-rose-600 animate-fade-in";
            }
        }

        function resetPractice() {
            ['q1', 'q2', 'q3', 'q4'].forEach(id => {
                document.getElementById(`ans-${id}`).value = "";
                document.getElementById(`feedback-${id}`).classList.add('hidden');
            });
        }

        window.onload = initBuilder;
    </script>
</body>
</html>
