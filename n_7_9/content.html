<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>N-7-9 æ¯”èˆ‡æ¯”ä¾‹å¼äº’å‹•è¬›ç¾©</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lucide/0.263.0/lucide.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap');
        body { font-family: 'Noto Sans TC', sans-serif; background-color: #f8fafc; }
        .math-fact { background-color: #fef3c7; color: #92400e; padding: 4px 10px; border-radius: 6px; font-weight: bold; }
        .step-badge { background-color: #3b82f6; color: white; width: 24px; height: 24px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 14px; flex-shrink: 0; }
        .feedback-box { transition: all 0.3s ease; }
        
        /* å¥½é–±è®€çš„åˆ†æ•¸æ¨£å¼ */
        .fraction-ui { display: inline-flex; flex-direction: column; align-items: center; vertical-align: middle; line-height: 1.1; margin: 0 4px; }
        .fraction-ui .num { border-bottom: 2px solid currentColor; padding: 0 4px; font-weight: bold; }
        .fraction-ui .den { padding: 0 4px; font-weight: bold; }
        
        .equation-box { font-size: 1.25rem; color: #1e40af; background: #eff6ff; padding: 8px 16px; border-radius: 8px; border: 1px solid #dbeafe; display: inline-block; font-weight: bold; }

        /* è®“æŒ‰éˆ•å…§çš„å…§å®¹å±…ä¸­ */
        .btn-fraction { display: inline-flex; align-items: center; justify-content: center; min-width: 80px; padding: 8px 16px; }
        
        .challenge-card { background: white; border: 1px solid #e2e8f0; border-radius: 12px; padding: 20px; box-shadow: 0 1px 3px rgba(0,0,0,0.1); }
    </style>
</head>
<body class="p-4 md:p-8">
    <div class="max-w-4xl mx-auto">
        <!-- Header -->
        <header class="text-center mb-8">
            <h1 class="text-3xl md:text-4xl font-bold text-slate-800 mb-2">ğŸ“˜ æ¯”èˆ‡æ¯”ä¾‹å¼</h1>
            <p class="text-slate-600">N-7-9 äº’å‹•å¼å­¸ç¿’è¬›ç¾©</p>
        </header>

        <!-- Learning Objectives -->
        <section class="bg-white rounded-xl shadow-sm p-6 mb-6 border-l-4 border-blue-500">
            <h2 class="text-xl font-bold text-blue-700 mb-3 flex items-center">
                <i data-lucide="target" class="mr-2 w-5 h-5"></i> ğŸ¯ å­¸ç¿’ç›®æ¨™
            </h2>
            <ul class="list-disc list-inside text-slate-700 space-y-1">
                <li>ç†è§£ã€Œæ¯”ã€çš„æ„ç¾©èˆ‡å‰é …ã€å¾Œé …çš„å®šç¾©ã€‚</li>
                <li>å­¸æœƒè¨ˆç®—æ¯”å€¼ä¸¦åŒ–ç°¡æ¯”ä¾‹ã€‚</li>
                <li>åˆ¤æ–·ä¸¦åˆ—å‡ºã€Œæ¯”ä¾‹å¼ã€ã€‚</li>
                <li>èªè­˜ä¸¦åˆ†è¾¨ã€Œæ­£æ¯”ã€èˆ‡ã€Œåæ¯”ã€çš„æ•¸é‡é—œä¿‚ã€‚</li>
                <li>è§£æ±ºé£Ÿé¹½æ°´ã€æ™‚é€Ÿèˆ‡æ¯”ä¾‹å°ºç­‰ç”Ÿæ´»æ‡‰ç”¨é¡Œã€‚</li>
            </ul>
        </section>

        <!-- Concept Cards -->
        <div class="grid md:grid-cols-3 gap-4 mb-8">
            <div class="bg-blue-50 p-5 rounded-lg border border-blue-200">
                <h3 class="font-bold text-blue-700 text-lg mb-2">1ï¸âƒ£ æ¯” (Ratio)</h3>
                <p class="text-sm text-blue-800">è¡¨ç¤ºå…©å€‹æ•¸ä¹‹é–“çš„é—œä¿‚ï¼Œå¯«ä½œ <b>a : b</b>ã€‚</p>
                <p class="mt-2 text-xs text-blue-600 font-bold">æ¯”å€¼ = a Ã· b</p>
            </div>
            <div class="bg-green-50 p-5 rounded-lg border border-green-200">
                <h3 class="font-bold text-green-700 text-lg mb-2">2ï¸âƒ£ æ­£æ¯” (Direct)</h3>
                <p class="text-sm text-green-800">å€æ•¸é—œä¿‚å›ºå®šï¼šä¸€å€‹å¢åŠ ï¼Œå¦ä¸€å€‹ä¹Ÿä¾æ¯”ä¾‹å¢åŠ ã€‚</p>
                <p class="mt-2 font-mono text-xs text-green-600 font-bold">å…¬å¼ï¼šy = kx</p>
            </div>
            <div class="bg-emerald-50 p-5 rounded-lg border border-emerald-200">
                <h3 class="font-bold text-emerald-700 text-lg mb-2">3ï¸âƒ£ åæ¯” (Inverse)</h3>
                <p class="text-sm text-emerald-800">ä¹˜ç©å›ºå®šï¼šä¸€å€‹å¢åŠ ï¼Œå¦ä¸€å€‹åè€Œç¸®å°ã€‚</p>
                <p class="mt-2 font-mono text-xs text-emerald-600 font-bold">å…¬å¼ï¼šx Ã— y = k</p>
            </div>
        </div>

        <!-- Worked Example: Salt Water -->
        <section class="bg-white rounded-xl shadow-md p-6 mb-8 border border-slate-200">
            <h2 class="text-2xl font-bold text-slate-800 mb-4 flex items-center">
                <i data-lucide="pencil" class="mr-2 text-blue-600"></i> è§£é¡Œç¤ºç¯„ï¼šç›´è§€å€æ•¸æ³•
            </h2>
            <div class="p-4 bg-slate-50 rounded-lg mb-4">
                <p class="text-slate-700 font-bold">é¡Œç›®ï¼š500g é£Ÿé¹½æ°´ä¸­æœ‰ 70g é£Ÿé¹½ã€‚è‹¥åŒæ¨£æ¿ƒåº¦ï¼Œ750g é£Ÿé¹½æ°´å«æœ‰å¤šå°‘é£Ÿé¹½ï¼Ÿ</p>
            </div>
            <div class="space-y-4">
                <div class="flex items-start gap-3">
                    <span class="step-badge">1</span>
                    <p class="text-slate-600">è§€å¯Ÿç¸½é‡è®ŠåŒ–ï¼š750 Ã· 500 = <b>1.5</b>ï¼Œä»£è¡¨ç¸½é‡è®Šæˆäº† <span class="font-bold text-blue-600">1.5 å€</span>ã€‚</p>
                </div>
                <div class="flex items-start gap-3">
                    <span class="step-badge">2</span>
                    <p class="text-slate-600">é‹ç”¨æ¯”ä¾‹é—œä¿‚ï¼šå› ç‚ºæ¿ƒåº¦ç›¸åŒï¼Œé£Ÿé¹½é‡ä¹Ÿè¦è·Ÿè‘—è®Šæˆ <span class="font-bold text-blue-600">1.5 å€</span>ã€‚</p>
                </div>
                <div class="flex items-start gap-3">
                    <span class="step-badge">3</span>
                    <p class="text-slate-600 font-bold">å¾—å‡ºç­”æ¡ˆï¼š70 Ã— 1.5 = 105ï¼Œæ‰€ä»¥å«æœ‰ <span class="math-fact text-blue-700">105g</span> é£Ÿé¹½ã€‚</p>
                </div>
            </div>
        </section>

        <!-- Dynamic Visualization / Interactive Tool -->
        <section class="bg-white rounded-xl shadow-md p-6 mb-8">
            <div class="flex justify-between items-center mb-4">
                <h2 class="text-2xl font-bold text-slate-800">ğŸ§® äº’å‹•æ¯”ä¾‹å¼æ¨¡æ“¬</h2>
                <button onclick="resetSim()" class="px-4 py-2 bg-slate-200 hover:bg-slate-300 rounded-md text-sm font-medium">é‡ç½®æ•¸å€¼</button>
            </div>
            <p class="text-slate-600 mb-6 text-sm">èª¿æ•´å·¦æ–¹çš„æ¯”ï¼Œçœ‹çœ‹å³æ–¹æ•¸å€¼å¦‚ä½•é€£å‹•ä¾†ç¶­æŒç›¸ç­‰çš„ã€Œæ¯”å€¼ã€ï¼š</p>
            
            <div class="flex flex-col md:flex-row items-center justify-center gap-4 mb-8">
                <div class="flex items-center gap-2 bg-slate-100 p-4 rounded-lg">
                    <input type="number" id="sim-a" value="2" oninput="updateSim()" class="w-16 p-2 border rounded text-center font-bold">
                    <span class="text-xl font-bold">:</span>
                    <input type="number" id="sim-b" value="3" oninput="updateSim()" class="w-16 p-2 border rounded text-center font-bold">
                </div>
                <div class="text-3xl font-bold text-blue-500">=</div>
                <div class="flex items-center gap-2 bg-blue-50 p-4 rounded-lg border border-blue-200">
                    <input type="number" id="sim-c" value="4" oninput="updateSim()" class="w-16 p-2 border rounded text-center font-bold text-blue-700">
                    <span class="text-xl font-bold text-blue-700">:</span>
                    <div id="sim-d-display" class="w-16 p-2 bg-white border border-blue-300 rounded text-center font-bold text-blue-700">6</div>
                </div>
            </div>

            <div id="sim-explanation" class="bg-amber-50 p-6 rounded-lg text-center text-amber-800 shadow-inner">
                <!-- Content will be updated by JS -->
            </div>
        </section>

        <!-- Step-by-Step Quiz: Scaling Logic -->
        <section class="bg-indigo-50 rounded-xl shadow-sm p-6 mb-8 border border-indigo-200">
            <h2 class="text-xl font-bold text-indigo-800 mb-4 flex items-center">
                <i data-lucide="check-square" class="mr-2 w-5 h-5"></i> ğŸ” ç·´ç¿’ï¼šè§€å¯Ÿå€æ•¸é—œä¿‚
            </h2>
            <div class="mb-4 text-slate-700 p-3 bg-white rounded-lg border border-indigo-100 italic text-sm">
                æŒ‘æˆ°ï¼šå¦‚æœ 3 : 5 = 12 : xï¼Œè«‹å• x æ˜¯å¤šå°‘ï¼Ÿè«‹ç”¨å€æ•¸æ€è€ƒã€‚
            </div>
            <div id="scaling-quiz" class="space-y-4">
                <div id="sq1">
                    <p class="text-slate-800 mb-2 font-medium">1ï¸âƒ£ è§€å¯Ÿå‰é …çš„è®ŠåŒ–ï¼šå¾ 3 è®Š 12ï¼Œæ˜¯è®Šç‚ºå¹¾å€ï¼Ÿ</p>
                    <div class="flex gap-2">
                        <button onclick="answerScaling(1, 4)" class="px-4 py-2 bg-white border border-indigo-300 rounded hover:bg-indigo-100 font-bold">4 å€</button>
                        <button onclick="answerScaling(1, 9)" class="px-4 py-2 bg-white border border-indigo-300 rounded hover:bg-indigo-100 font-bold">9 å€</button>
                    </div>
                </div>
                <div id="sq2" class="hidden">
                    <p class="text-slate-800 mb-2 font-medium">2ï¸âƒ£ ç‚ºäº†ç¶­æŒæ¯”ä¾‹ï¼Œå¾Œé … 5 ä¹Ÿå¿…é ˆè·Ÿè‘—è®Šå¤§ç›¸åŒçš„å€æ•¸ï¼š</p>
                    <div class="flex gap-2">
                        <button onclick="answerScaling(2, 20)" class="px-4 py-2 bg-white border border-indigo-300 rounded hover:bg-indigo-100 font-bold">5 Ã— 4 = 20</button>
                        <button onclick="answerScaling(2, 25)" class="px-4 py-2 bg-white border border-indigo-300 rounded hover:bg-indigo-100 font-bold">5 Ã— 5 = 25</button>
                    </div>
                </div>
                <div id="scaling-feedback" class="hidden p-4 rounded-lg font-bold text-center"></div>
            </div>
        </section>

        <!-- Practice 1: Ratio and Value -->
        <section class="bg-white rounded-xl shadow-md p-6 mb-8 border-t-4 border-blue-500">
            <h2 class="text-xl font-bold text-slate-800 mb-4 flex items-center">
                <i data-lucide="pencil-line" class="mr-2 text-blue-600"></i> ğŸ§© ç·´ç¿’ 1ï¼šæ¯”èˆ‡æ¯”å€¼ï¼ˆå¼•å°å¼ï¼‰
            </h2>
            <div class="p-4 bg-blue-50 rounded-lg mb-6 border border-blue-100">
                <p class="text-blue-900 font-bold">é¡Œç›®æƒ…å¢ƒï¼šä¸€ç›’å½©ç­†ä¸­ï¼Œç´…ç­†æœ‰ 6 æ”¯ï¼Œè—ç­†æœ‰ 9 æ”¯ã€‚</p>
            </div>
            
            <div class="space-y-6">
                <!-- Step 1 -->
                <div id="p1-s1">
                    <p class="text-slate-700 mb-2 font-medium">æ­¥é©Ÿ 1ï¸âƒ£ï¼šç´…ç­†å°è—ç­†çš„ã€Œæ¯”ã€æ˜¯å¤šå°‘ï¼Ÿ</p>
                    <p class="text-xs text-slate-500 mb-2 underline decoration-blue-200">è«‹ä¾é¡Œç›®åŸå§‹æ•¸é‡å¡«å¯«ï¼Œä¸éœ€è¦åŒ–ç°¡</p>
                    <div class="flex gap-2">
                        <input type="text" id="p1-ans1" placeholder="è«‹è¼¸å…¥æ¯”" class="p-2 border rounded-md focus:ring-2 focus:ring-blue-400 outline-none w-48 font-bold text-center bg-slate-50">
                        <button onclick="checkP1(1)" class="bg-blue-600 text-white px-6 py-2 rounded-md hover:bg-blue-700 transition-colors">æª¢æŸ¥ç­”æ¡ˆ</button>
                    </div>
                    <div id="p1-f1" class="text-sm mt-2 hidden font-bold"></div>
                </div>

                <!-- Step 2 -->
                <div id="p1-s2" class="hidden opacity-0 transition-all duration-500">
                    <p class="text-slate-700 mb-2 font-medium border-t pt-4">æ­¥é©Ÿ 2ï¸âƒ£ï¼šæ¯”å€¼è¦æ€éº¼ç®—ï¼Ÿ</p>
                    <p class="text-xs text-slate-500 mb-2 underline decoration-blue-200">è¨ˆç®—ã€Œå‰é … Ã· å¾Œé …ã€ï¼Œä¸¦åŒ–ç°¡è‡³ã€æœ€ç°¡åˆ†æ•¸ã€‘</p>
                    <div class="flex gap-4">
                        <button onclick="checkP1_Step2('2/3')" class="btn-fraction bg-white border border-blue-300 rounded-lg hover:bg-blue-100 font-bold text-blue-700 transition-all">
                            <div class="fraction-ui"><span class="num">2</span><span class="den">3</span></div>
                        </button>
                        <button onclick="checkP1_Step2('3/2')" class="btn-fraction bg-white border border-blue-300 rounded-lg hover:bg-blue-100 font-bold text-blue-700 transition-all">
                            <div class="fraction-ui"><span class="num">3</span><span class="den">2</span></div>
                        </button>
                    </div>
                    <div id="p1-f2" class="text-sm mt-3 hidden rounded-lg border p-3 font-bold"></div>
                </div>

                <!-- Result -->
                <div id="p1-s3" class="hidden opacity-0 transition-all duration-500">
                    <div class="bg-green-50 p-6 border border-green-200 rounded-lg shadow-inner">
                        <p class="text-green-800 font-bold flex items-center mb-4 text-lg">
                            <i data-lucide="party-popper" class="mr-2 w-6 h-6"></i> æŒ‘æˆ°æˆåŠŸï¼
                        </p>
                        <div class="text-green-700 leading-relaxed">
                            <p class="mb-4">é€™é¡Œçš„æ¯”æ˜¯ <span class="font-bold underline text-green-900">6 : 9</span>ã€‚åŒ–ç°¡å¾Œç‚º <span class="font-bold underline text-green-900">2 : 3</span>ã€‚</p>
                            <div class="flex flex-wrap items-center gap-3">
                                <span class="font-bold">æ¯”å€¼è¨ˆç®—éç¨‹ï¼š</span>
                                <div class="equation-box">6 Ã· 9 = <div class="fraction-ui"><span class="num">6</span><span class="den">9</span></div></div>
                                <span class="font-bold">åŒ–ç°¡å¾Œçµæœï¼š</span>
                                <div class="bg-white px-4 py-2 rounded-lg border-2 border-green-400 shadow-sm text-3xl text-blue-800">
                                    <div class="fraction-ui"><span class="num">2</span><span class="den">3</span></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Practice 2: Classification -->
        <section class="bg-white rounded-xl shadow-md p-6 mb-8 border-t-4 border-emerald-500">
            <h2 class="text-xl font-bold text-slate-800 mb-4 flex items-center">
                <i data-lucide="layers" class="mr-2 text-emerald-600"></i> ğŸ§® ç·´ç¿’ 2ï¼šåˆ¤æ–·æ­£æ¯”æˆ–åæ¯”
            </h2>
            <p class="text-slate-600 mb-6 text-sm font-medium">è«‹åˆ¤æ–·ä¸‹åˆ—æƒ…å¢ƒå±¬æ–¼å“ªä¸€ç¨®é—œä¿‚ï¼Œé»æ“Šå¾Œçœ‹ç†ç”±èªªæ˜ï¼š</p>
            
            <div class="space-y-6">
                <!-- Case 1 -->
                <div class="p-4 border rounded-xl bg-slate-50 border-slate-200">
                    <p class="text-slate-800 font-bold mb-3">1. è¡Œé§›æ™‚é–“å›ºå®šï¼Œé€Ÿåº¦èˆ‡è·é›¢çš„é—œä¿‚</p>
                    <div class="flex gap-2 mb-3">
                        <button onclick="checkP2(1, 'æ­£æ¯”')" class="px-6 py-2 bg-white border border-slate-300 rounded-lg hover:bg-blue-50 font-bold text-slate-700 transition-all">æ­£æ¯”</button>
                        <button onclick="checkP2(1, 'åæ¯”')" class="px-6 py-2 bg-white border border-slate-300 rounded-lg hover:bg-emerald-50 font-bold text-slate-700 transition-all">åæ¯”</button>
                        <button onclick="checkP2(1, 'éƒ½ä¸æ˜¯')" class="px-6 py-2 bg-white border border-slate-300 rounded-lg hover:bg-slate-100 font-bold text-slate-700 transition-all">éƒ½ä¸æ˜¯</button>
                    </div>
                    <div id="p2-f1" class="feedback-box text-sm px-4 py-3 rounded-lg hidden font-bold"></div>
                </div>

                <!-- Case 2 -->
                <div class="p-4 border rounded-xl bg-slate-50 border-slate-200">
                    <p class="text-slate-800 font-bold mb-3">2. å·¥ä½œé‡å›ºå®šï¼Œå·¥äººæ•¸èˆ‡å®Œæˆæ™‚é–“çš„é—œä¿‚</p>
                    <div class="flex gap-2 mb-3">
                        <button onclick="checkP2(2, 'æ­£æ¯”')" class="px-6 py-2 bg-white border border-slate-300 rounded-lg hover:bg-blue-50 font-bold text-slate-700 transition-all">æ­£æ¯”</button>
                        <button onclick="checkP2(2, 'åæ¯”')" class="px-6 py-2 bg-white border border-slate-300 rounded-lg hover:bg-emerald-50 font-bold text-slate-700 transition-all">åæ¯”</button>
                        <button onclick="checkP2(2, 'éƒ½ä¸æ˜¯')" class="px-6 py-2 bg-white border border-slate-300 rounded-lg hover:bg-slate-100 font-bold text-slate-700 transition-all">éƒ½ä¸æ˜¯</button>
                    </div>
                    <div id="p2-f2" class="feedback-box text-sm px-4 py-3 rounded-lg hidden font-bold"></div>
                </div>

                <!-- Case 3 -->
                <div class="p-4 border rounded-xl bg-slate-50 border-slate-200">
                    <p class="text-slate-800 font-bold mb-3">3. è€ƒè©¦çš„åˆ†æ•¸èˆ‡ä½ çš„åº§è™Ÿä¹‹é—œä¿‚</p>
                    <div class="flex gap-2 mb-3">
                        <button onclick="checkP2(3, 'æ­£æ¯”')" class="px-6 py-2 bg-white border border-slate-300 rounded-lg hover:bg-blue-50 font-bold text-slate-700 transition-all">æ­£æ¯”</button>
                        <button onclick="checkP2(3, 'åæ¯”')" class="px-6 py-2 bg-white border border-slate-300 rounded-lg hover:bg-emerald-50 font-bold text-slate-700 transition-all">åæ¯”</button>
                        <button onclick="checkP2(3, 'éƒ½ä¸æ˜¯')" class="px-6 py-2 bg-white border border-slate-300 rounded-lg hover:bg-slate-100 font-bold text-slate-700 transition-all">éƒ½ä¸æ˜¯</button>
                    </div>
                    <div id="p2-f3" class="feedback-box text-sm px-4 py-3 rounded-lg hidden font-bold"></div>
                </div>
            </div>
        </section>

        <!-- Comprehensive Practice -->
        <section class="bg-slate-50 rounded-2xl p-6 mb-8 border-2 border-slate-200">
            <h2 class="text-2xl font-bold text-slate-800 mb-6 flex items-center">
                <i data-lucide="rocket" class="mr-2 text-orange-500"></i> å¯¦æˆ°æŒ‘æˆ°ï¼šç¶œåˆç·´ç¿’
            </h2>
            
            <div class="space-y-8">
                <!-- Challenge 1 -->
                <div class="challenge-card">
                    <h3 class="font-bold text-slate-700 mb-3">1. æ¯”ä¾‹å°ºæ‡‰ç”¨</h3>
                    <p class="text-sm text-slate-600 mb-4">åœ°åœ–æ¯”ä¾‹å°ºç‚º <span class="font-bold">1 : 20000</span>ã€‚è‹¥åœ¨åœ°åœ–ä¸Šé‡å¾—ä¸€æ®µè·¯é•· <span class="font-bold">5 å…¬åˆ†</span>ï¼Œè«‹å•å¯¦éš›è·é›¢æ˜¯å¤šå°‘å…¬é‡Œï¼Ÿ</p>
                    <div class="flex items-center gap-3">
                        <input type="number" id="chal1-ans" class="p-2 border rounded-lg w-24 text-center" placeholder="æ•¸å­—">
                        <span class="font-bold">å…¬é‡Œ</span>
                        <button onclick="checkChal(1, 1)" class="bg-slate-800 text-white px-4 py-2 rounded-lg hover:bg-slate-700 text-sm transition-all">æª¢æŸ¥çµæœ</button>
                    </div>
                    <div id="chal1-feedback" class="mt-4 hidden text-sm p-3 rounded-lg font-bold"></div>
                </div>

                <!-- Challenge 2 -->
                <div class="challenge-card">
                    <h3 class="font-bold text-slate-700 mb-3">2. æ­£æ¯”ç”Ÿæ´»æ‡‰ç”¨</h3>
                    <p class="text-sm text-slate-600 mb-4">ä¸€è¼›è»Šå­ç©©å®šè¡Œé§›ï¼Œè¡Œé§›äº† <span class="font-bold">3 å°æ™‚</span> å…±å‰é€²äº† <span class="font-bold">180 å…¬é‡Œ</span>ã€‚è‹¥ä»¥åŒæ¨£é€Ÿåº¦è¡Œé§› <span class="font-bold">300 å…¬é‡Œ</span>ï¼Œå…±éœ€å¤šå°‘å°æ™‚ï¼Ÿ</p>
                    <div class="flex items-center gap-3">
                        <input type="number" id="chal2-ans" class="p-2 border rounded-lg w-24 text-center" placeholder="æ•¸å­—">
                        <span class="font-bold">å°æ™‚</span>
                        <button onclick="checkChal(2, 5)" class="bg-slate-800 text-white px-4 py-2 rounded-lg hover:bg-slate-700 text-sm transition-all">æª¢æŸ¥çµæœ</button>
                    </div>
                    <div id="chal2-feedback" class="mt-4 hidden text-sm p-3 rounded-lg font-bold"></div>
                </div>

                <!-- Challenge 3 -->
                <div class="challenge-card">
                    <h3 class="font-bold text-slate-700 mb-3">3. æ¯”ä¾‹åˆ†é…æ‡‰ç”¨</h3>
                    <p class="text-sm text-slate-600 mb-4">ç¶œåˆæœæ±çš„é…æ–¹æ˜¯ã€Œæœæ±ï¼šæ°´ = <span class="font-bold">2 : 5</span>ã€ã€‚è‹¥è€é—†æƒ³èª¿è£½å‡ºç¸½é‡ <span class="font-bold">1400 æ¯«å‡</span> çš„æœæ±ï¼Œéœ€è¦åŠ å…¥å¤šå°‘æ¯«å‡çš„ç´”æœæ±ï¼Ÿ</p>
                    <div class="flex items-center gap-3">
                        <input type="number" id="chal3-ans" class="p-2 border rounded-lg w-24 text-center" placeholder="æ•¸å­—">
                        <span class="font-bold">æ¯«å‡</span>
                        <button onclick="checkChal(3, 400)" class="bg-slate-800 text-white px-4 py-2 rounded-lg hover:bg-slate-700 text-sm transition-all">æª¢æŸ¥çµæœ</button>
                    </div>
                    <div id="chal3-feedback" class="mt-4 hidden text-sm p-3 rounded-lg font-bold"></div>
                </div>
            </div>
        </section>

        <!-- Cheat Sheet & Reflection -->
        <footer class="grid md:grid-cols-2 gap-6 mb-12">
            <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-200">
                <h3 class="font-bold text-slate-800 mb-3 border-b pb-2 flex items-center">
                    <i data-lucide="alert-circle" class="mr-2 text-red-500"></i> âš ï¸ æ˜“éŒ¯è¿·æ€é™·é˜±
                </h3>
                <ul class="text-sm space-y-3 text-slate-600 font-medium">
                    <li class="flex items-center gap-2">
                        âŒ <span class="text-red-500 font-bold">2:3 = 3:2</span> 
                        <span class="text-slate-400">â†’</span> 
                        <span class="bg-slate-100 px-2 py-1 rounded text-slate-700 italic text-xs">å‰é …èˆ‡å¾Œé …ä¸èƒ½éš¨æ„å°èª¿ã€‚</span>
                    </li>
                    <li class="flex items-center gap-2">
                        âŒ <span class="text-red-500 font-bold">ä¸€å¢ä¸€å¢å¿…æ­£æ¯”</span> 
                        <span class="text-slate-400">â†’</span> 
                        <span class="bg-slate-100 px-2 py-1 rounded text-slate-700 italic text-xs">é‚„éœ€è¦ã€Œå€æ•¸å›ºå®šã€æ‰æ˜¯æ­£æ¯”ã€‚</span>
                    </li>
                    <li class="flex items-center gap-2">
                        âŒ <span class="text-red-500 font-bold">æ¯”å€¼èˆ‡æ¯”æ··æ·†</span> 
                        <span class="text-slate-400">â†’</span> 
                        <span class="bg-amber-50 border border-amber-200 px-2 py-1 rounded text-amber-800 font-bold text-xs">
                             æ¯”æ˜¯ã€Œé—œä¿‚è¡¨ç¤ºã€ï¼Œæ¯”å€¼æ˜¯ã€Œä¸€å€‹æ•¸å€¼ã€ã€‚
                        </span>
                    </li>
                </ul>
            </div>
            <div class="bg-slate-900 text-slate-50 p-6 rounded-xl shadow-sm">
                <h3 class="font-bold mb-3 border-b border-slate-700 pb-2 flex items-center text-amber-400">
                    <i data-lucide="lightbulb" class="mr-2 w-5 h-5"></i> ç”Ÿæ´»ä¸­çš„æ¯”
                </h3>
                <p class="text-sm leading-relaxed italic opacity-80">
                    ã€Œåœ°åœ–æ¯”ä¾‹å°º 1 : 50000 ä»£è¡¨ä»€éº¼æ„æ€ï¼Ÿã€<br><br>
                    ã€Œå¦‚æœå·¥äººå¢åŠ ä¸€å€ï¼Œå®Œå·¥æ™‚é–“æœƒè®Šç‚ºä¸€åŠå—ï¼Ÿé€™å±¬æ–¼å“ªç¨®æ¯”ï¼Ÿã€
                </p>
            </div>
        </footer>

        <footer class="text-center text-slate-400 text-sm pb-12">
            æœ¬è¬›ç¾©ä¾æ“š 108 èª²ç¶± N-7-9 æ¨™æº–ç·¨è£½ &copy; 2024 äº’å‹•å¼æ•™å­¸ç³»çµ±
        </footer>
    </div>

    <script>
        const scalingFeedback = document.getElementById('scaling-feedback');

        // Initialize Lucide Icons
        window.onload = function() {
            if (typeof lucide !== 'undefined') {
                lucide.createIcons();
            }
            updateSim();
        };

        // Greatest Common Divisor
        function getGCD(a, b) {
            a = Math.abs(Math.round(a));
            b = Math.abs(Math.round(b));
            while (b) {
                a %= b;
                [a, b] = [b, a];
            }
            return a;
        }

        // Simulation Tool
        function updateSim() {
            const a = parseFloat(document.getElementById('sim-a').value) || 1;
            const b = parseFloat(document.getElementById('sim-b').value) || 1;
            const c = parseFloat(document.getElementById('sim-c').value) || 1;
            
            const d = (b * c) / a;
            const roundedD = Math.round(d * 100) / 100;
            document.getElementById('sim-d-display').innerText = roundedD;
            
            const decimalValue = a / b;
            const roundedDecimal = Math.round(decimalValue * 1000) / 1000;
            
            let fractionHTML = "";
            if (Number.isInteger(a) && Number.isInteger(b)) {
                const common = getGCD(a, b);
                const num = a / common;
                const den = b / common;
                if (den === 1) {
                    fractionHTML = num;
                } else {
                    fractionHTML = `<div class="fraction-ui"><span class="num">${num}</span><span class="den">${den}</span></div>`;
                }
            } else {
                fractionHTML = roundedDecimal;
            }

            document.getElementById('sim-explanation').innerHTML = `
                <div class="flex flex-col items-center gap-2">
                    <div class="text-sm font-bold">ç›®å‰ç‹€æ…‹ï¼š<span class="math-fact text-lg">${a} : ${b} = ${c} : ${roundedD}</span></div>
                    <div class="flex items-center gap-4 text-xl font-bold">
                        <span>æ¯”å€¼ç‚ºï¼š${fractionHTML}</span>
                        <span class="text-slate-400 text-base font-normal">|</span>
                        <span class="text-blue-700">ç´„ç‚º ${roundedDecimal}</span>
                    </div>
                </div>
            `;
        }

        function resetSim() {
            document.getElementById('sim-a').value = 2;
            document.getElementById('sim-b').value = 3;
            document.getElementById('sim-c').value = 4;
            updateSim();
        }

        // Scaling Quiz Logic
        function answerScaling(step, ans) {
            const q1 = document.getElementById('sq1');
            const q2 = document.getElementById('sq2');
            scalingFeedback.classList.remove('hidden');
            if (step === 1) {
                if (ans === 4) {
                    scalingFeedback.innerHTML = "âœ… æ­£ç¢ºï¼12 æ˜¯ 3 çš„ 4 å€ã€‚";
                    scalingFeedback.className = "p-4 rounded-lg font-bold text-center bg-green-100 text-green-800 mb-4 shadow-sm";
                    q1.classList.add('opacity-50');
                    q2.classList.remove('hidden');
                } else {
                    scalingFeedback.innerHTML = "âŒ å†æƒ³æƒ³çœ‹ï¼Œ3 Ã— å¤šå°‘æœƒç­‰æ–¼ 12ï¼Ÿ";
                    scalingFeedback.className = "p-4 rounded-lg font-bold text-center bg-red-100 text-red-800 mb-4 shadow-sm";
                }
            } else if (step === 2) {
                if (ans === 20) {
                    scalingFeedback.innerHTML = "ğŸ‰ å¤ªæ£’äº†ï¼å¾Œé … 5 è®Š 4 å€å¾— x = 20ã€‚";
                    scalingFeedback.className = "p-4 rounded-lg font-bold text-center bg-indigo-100 text-indigo-800 mb-4 shadow-sm";
                    q2.classList.add('opacity-50');
                } else {
                    scalingFeedback.innerHTML = "âŒ æ³¨æ„å–”ï¼Œå¾Œé …ä¹Ÿè¦è®Šå¤§ã€Œç›¸åŒã€å€æ•¸ã€‚";
                    scalingFeedback.className = "p-4 rounded-lg font-bold text-center bg-red-100 text-red-800 mb-4 shadow-sm";
                }
            }
        }

        // Practice 1 Logic
        function checkP1(step) {
            const feedbackBox = document.getElementById('p1-f1');
            if (step === 1) {
                const val = document.getElementById('p1-ans1').value.trim().replace(/\s/g, '');
                if (val === '6:9') {
                    feedbackBox.innerHTML = "âœ… ç­”å°äº†ï¼ç´…ç­† 6 æ”¯ã€è—ç­† 9 æ”¯ï¼Œæ¯”å°±æ˜¯ 6 : 9ã€‚";
                    feedbackBox.className = "text-sm mt-2 text-green-600 font-bold p-2 bg-green-50 rounded";
                    feedbackBox.classList.remove('hidden');
                    
                    const next = document.getElementById('p1-s2');
                    next.classList.remove('hidden');
                    setTimeout(() => next.classList.add('opacity-100'), 10);
                } else if (val === '2:3') {
                    feedbackBox.innerHTML = "ğŸ’¡ ä½ ç›´æ¥å¯«å‡ºåŒ–ç°¡å¾Œçš„çµæœäº†ï¼é›–ç„¶ä¹Ÿå°ï¼Œä½†è«‹å…ˆå¡«å¯«åŸå§‹æ•¸å€¼ã€Œ6 : 9ã€å–”ã€‚";
                    feedbackBox.className = "text-sm mt-2 text-amber-600 font-bold p-2 bg-amber-50 rounded";
                    feedbackBox.classList.remove('hidden');
                } else {
                    feedbackBox.innerHTML = "âŒ æ ¼å¼ä¸å°æˆ–æ•¸å€¼éŒ¯èª¤å–”ï¼Œè«‹è¼¸å…¥ã€Œç´…ç­†æ•¸ : è—ç­†æ•¸ã€ã€‚";
                    feedbackBox.className = "text-sm mt-2 text-red-600 font-bold p-2 bg-red-50 rounded";
                    feedbackBox.classList.remove('hidden');
                }
            }
        }

        window.checkP1_Step2 = function(ans) {
            const feedbackBox = document.getElementById('p1-f2');
            feedbackBox.classList.remove('hidden');

            if (ans === '2/3') {
                feedbackBox.innerHTML = `âœ… æ­£ç¢ºï¼æ¯”å€¼è¨ˆç®—ï¼š6 Ã· 9 = <div class="fraction-ui"><span class="num">6</span><span class="den">9</span></div>ï¼ŒåŒ–ç°¡å¾Œç­‰æ–¼ <div class="fraction-ui"><span class="num">2</span><span class="den">3</span></div>ã€‚`;
                feedbackBox.className = "text-sm mt-3 text-green-700 font-bold p-3 bg-green-50 rounded-lg border border-green-200";
                
                const next = document.getElementById('p1-s3');
                next.classList.remove('hidden');
                setTimeout(() => next.classList.add('opacity-100'), 10);
                if (typeof lucide !== 'undefined') lucide.createIcons();
            } else {
                feedbackBox.innerHTML = `ğŸ’¡ æç¤ºï¼šæ¯”å€¼ = å‰é … Ã· å¾Œé …ã€‚å‰é … 6ï¼Œå¾Œé … 9ã€‚<br>ç®—ç®—çœ‹ï¼š6 Ã· 9 = <div class="fraction-ui"><span class="num">6</span><span class="den">9</span></div>ï¼ŒåŒ–ç°¡å¾Œæ˜¯å¤šå°‘å‘¢ï¼Ÿ`;
                feedbackBox.className = "text-sm mt-3 text-amber-700 font-bold p-3 bg-amber-50 rounded-lg border border-amber-200";
            }
        }

        // Practice 2 Logic
        function checkP2(qId, type) {
            const f = document.getElementById('p2-f' + qId);
            f.classList.remove('hidden');
            let content = "";
            let color = "";

            if (qId === 1) {
                if (type === 'æ­£æ¯”') {
                    color = "bg-blue-100 text-blue-800 border border-blue-200";
                    content = "æ­£ç¢ºï¼æ™‚é–“å›ºå®šæ™‚ï¼Œé€Ÿåº¦å¢åŠ  2 å€ï¼Œè·é›¢ä¹Ÿæœƒè·Ÿè‘—å¢åŠ  2 å€ã€‚å…¬å¼ï¼šè·é›¢ = é€Ÿåº¦ Ã— æ™‚é–“ã€‚";
                } else {
                    color = "bg-red-50 text-red-700 border border-red-100";
                    content = "ä¸å°å“¦ã€‚é€Ÿåº¦è·Ÿè·é›¢æ˜¯å€æ•¸åŒæ­¥å¢é•·çš„ï¼Œå±¬æ–¼æ­£æ¯”é—œä¿‚ã€‚";
                }
            } else if (qId === 2) {
                if (type === 'åæ¯”') {
                    color = "bg-emerald-100 text-emerald-800 border border-emerald-200";
                    content = "æ­£ç¢ºï¼å·¥ä½œé‡å›ºå®šï¼Œå·¥äººæ•¸è®Šç‚º 2 å€ï¼Œå®Œå·¥å¤©æ•¸å°±æœƒè®Šç‚º 1/2ã€‚ä¸”å·¥äºº Ã— å¤©æ•¸ = ç¸½é‡ (ä¹˜ç©å›ºå®š)ã€‚";
                } else {
                    color = "bg-red-50 text-red-700 border border-red-100";
                    content = "å†æƒ³ä¸€ä¸‹ã€‚ä¸€å€‹è®Šå¤šä¸€å€‹è®Šå°‘ï¼Œä¸”å…©è€…ç›¸ä¹˜æœƒæ˜¯å›ºå®šçš„ç¸½å·¥ä½œé‡ï¼Œé€™æ˜¯åæ¯”å–”ã€‚";
                }
            } else if (qId === 3) {
                if (type === 'éƒ½ä¸æ˜¯') {
                    color = "bg-slate-200 text-slate-800 border border-slate-300";
                    content = "æ­£ç¢ºï¼åº§è™Ÿ 10 è™Ÿçš„äººåˆ†æ•¸ä¸ä¸€å®šæœƒæ˜¯ 1 è™Ÿçš„ 10 å€ï¼Œé€™å…©è€…ä¹‹é–“æ²’æœ‰å›ºå®šçš„æ¯”ä¾‹è¦å¾‹ã€‚";
                } else {
                    color = "bg-red-50 text-red-700 border border-red-100";
                    content = "æƒ³å¤ªå¤šå•¦ï¼åº§è™Ÿè·Ÿåˆ†æ•¸åœ¨æ•¸å­¸è¦å¾‹ä¸Šæ˜¯æ²’æœ‰ä»»ä½•é€£å‹•é—œä¿‚çš„ã€‚";
                }
            }
            f.className = "feedback-box text-sm px-4 py-3 rounded-lg mt-2 " + color;
            f.innerHTML = content;
        }

        // Comprehensive Challenge Logic
        function checkChal(qNum, correctVal) {
            const input = document.getElementById(`chal${qNum}-ans`);
            const feedback = document.getElementById(`chal${qNum}-feedback`);
            const userVal = parseFloat(input.value);
            
            feedback.classList.remove('hidden');
            
            if (userVal === correctVal) {
                feedback.className = "mt-4 text-sm p-3 rounded-lg font-bold bg-green-100 text-green-800";
                if (qNum === 1) {
                    feedback.innerHTML = `âœ… å¤ªæ£’äº†ï¼è¨ˆç®—éç¨‹ï¼š5 å…¬åˆ† Ã— 20000 = 100000 å…¬åˆ†ã€‚å› ç‚º 1 å…¬é‡Œ = 100000 å…¬åˆ†ï¼Œæ‰€ä»¥å¯¦éš›è·é›¢æ˜¯ 1 å…¬é‡Œã€‚`;
                } else if (qNum === 2) {
                    feedback.innerHTML = `âœ… å¤ªæ£’äº†ï¼è¨ˆç®—éç¨‹ï¼š180 Ã· 3 = 60 (å…¬é‡Œ/å°æ™‚)ã€‚è¡Œé§› 300 å…¬é‡Œå…±éœ€ 300 Ã· 60 = 5 å°æ™‚ã€‚`;
                } else if (qNum === 3) {
                    feedback.innerHTML = `âœ… å¤ªæ£’äº†ï¼è¨ˆç®—éç¨‹ï¼šæ¯”ä¾‹ç¸½åˆç‚º 2 + 5 = 7 ç­‰ä»½ã€‚æœæ±å äº† 2/7ï¼Œæ‰€ä»¥éœ€è¦ 1400 Ã— (2/7) = 400 æ¯«å‡ã€‚`;
                }
            } else {
                feedback.className = "mt-4 text-sm p-3 rounded-lg font-bold bg-red-100 text-red-800";
                if (qNum === 1) {
                    feedback.innerHTML = `âŒ å†æƒ³æƒ³çœ‹ï¼Œåœ°åœ–ä¸Šçš„ 1 å…¬åˆ†ä»£è¡¨å¯¦éš› 20000 å…¬åˆ†ï¼Œé‚£ 5 å…¬åˆ†æ˜¯å¤šå°‘å…¬åˆ†ï¼Ÿåˆ¥å¿˜äº†æ›ç®—æˆå…¬é‡Œå–”ï¼`;
                } else if (qNum === 2) {
                    feedback.innerHTML = `âŒ å…ˆç®—å‡ºä¸€å°æ™‚è·‘å¤šå°‘å…¬é‡Œï¼Œæˆ–è€…ç”¨æ¯”ä¾‹å¼ 3 : 180 = x : 300 ä¾†çœ‹çœ‹ï¼Ÿ`;
                } else if (qNum === 3) {
                    feedback.innerHTML = `âŒ æç¤ºï¼šæœæ±èˆ‡æ°´çš„ç¸½ä»½æ•¸æ˜¯ 7 ä»½ã€‚1400 æ¯«å‡è£¡é¢æœ‰å¹¾ä»½æ˜¯æœæ±ï¼Ÿ`;
                }
            }
        }
    </script>
</body>
</html>
